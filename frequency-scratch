periods_of_intense_drinking = {agent:len(np.where(data['complete record'][:,agent,PAST_MONTH_DRINKING]>upper_quartile_cutoff)) 
									for agent in heavy_users_idx}

temporal_threshold = scoreatpercentile(periods_of_intense_drinking.values(),75)
heavy_frequent_users_idx = [agent for agent in periods_of_intense_drinking 
				if periods_of_intense_drinking[agent] > temporal_threshold]

'''
ap("Heavy users %s"%(' '.join(map(str,heavy_users_idx))))
ap("Light users %s"%(' '.join(map(str,light_users_idx))))
ap("Heavy frequent users %s"%(' '.join(map(str,heavy_frequent_users_idx))))
'''

heavy_not_frequent_users_idx = np.array(list(set(periods_of_intense_drinking.keys()) - set(heavy_frequent_users_idx)))
compare_demographics([('Heavy frequent users',heavy_frequent_users_idx,'r'),('Heavy users',heavy_users_idx,'k')])
compare_distributions('alpha',[('Heavy frequent users',heavy_frequent_users_idx,'r'),('Heavy users',heavy_users_idx,'k')])
